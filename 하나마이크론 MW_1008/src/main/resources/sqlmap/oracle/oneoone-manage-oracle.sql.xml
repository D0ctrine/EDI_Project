<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace는 dao의 패키지명과 클래스명이 일치해야 함. -->
<mapper namespace="kr.co.nexmore.rfiddaemon.mapper.OneooneManageMapper">

    <select id="getOneooneConnectionList" resultType="OneooneVO">
			SELECT STATION_X_ID
				 , STATION_X_IP
				 , STATION_X_PORT
				 , STATION_X_CHANNEL
				 , RFID_TUNE_CHANNEL
				 , CONNECT_STATUS
				 , AUTO_CONNECT
				 , MES_TIMEOUT
			FROM
          		RFID2_ONEOONE_INFO_TM
	</select>

    <update id="setOneooneConnectStatus" parameterType="OneooneVO">
			UPDATE
				RFID2_ONEOONE_INFO_TM
			SET
				CONNECT_STATUS = #{connectStatus}
			WHERE
				STATION_X_ID = #{stationXId}
	</update>

    <insert id="createOneooneConnection" parameterType="OneooneVO">
		INSERT INTO RFID2_ONEOONE_INFO_TM (
				STATION_X_ID
			  , STATION_X_IP
			  , STATION_X_PORT
			  , STATION_X_CHANNEL
			  , RFID_TUNE_CHANNEL
			  , AUTO_CONNECT
			  , MES_TIMEOUT
		)
		VALUES (
				ONEOONE_SEQ.NEXTVAL
			  , #{stationXIp}
			  , #{stationXPort}
			  , #{stationXChannel}
			  , #{rfidTuneChannel}
			  , #{autoConnect}
			  , #{mesTimeout}
		)
	</insert>

	<select id="getStationXId" resultType="int">
			SELECT
				STATION_X_ID
			FROM
          		RFID2_ONEOONE_INFO_TM
			WHERE
				STATION_X_IP = #{stationXIp}
			AND
				STATION_X_PORT = #{stationXPort}
			AND
				STATION_X_CHANNEL = #{stationXChannel}
			AND
				RFID_TUNE_CHANNEL = #{rfidTuneChannel}
	</select>

    <!-- 연결정보 수정 -->
    <update id="updateOneooneConnection" parameterType="OneooneVO">
		UPDATE
			RFID2_ONEOONE_INFO_TM
		SET
			STATION_X_IP = #{stationXIp}
		  , STATION_X_PORT = #{stationXPort}
		  , STATION_X_CHANNEL = #{stationXChannel}
		  , RFID_TUNE_CHANNEL = #{rfidTuneChannel}
		  , AUTO_CONNECT = #{autoConnect}
		  , MES_TIMEOUT = #{mesTimeout}
		WHERE
			STATION_X_ID = #{stationXId}
	</update>

	<update id="updateOneooneTimeout" parameterType="OneooneVO">
		UPDATE
			RFID2_ONEOONE_INFO_TM
		SET
			MES_TIMEOUT = #{mesTimeout}
		WHERE
			STATION_X_ID = #{stationXId}
	</update>

    <!-- 삭제 -->
    <delete id="deleteOneooneConnection" parameterType="Integer">
		DELETE  FROM
			RFID2_ONEOONE_INFO_TM
		WHERE
			STATION_X_ID = #{value}
	</delete>

</mapper>